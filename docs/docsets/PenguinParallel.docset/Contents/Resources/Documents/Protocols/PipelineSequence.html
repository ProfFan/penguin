<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PipelineSequence Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Protocol/PipelineSequence" class="dashAnchor"></a>

    <a title="PipelineSequence Protocol Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          PenguinParallel Docs
        </a>
         (75% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/saeta/penguin">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">PenguinParallel Reference</a>
      <img class="carat" src="../img/carat.png" />
      PipelineSequence Protocol Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Pipelines.html">Pipelines</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/PipelineSequence.html">PipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/PipelineIteratorProtocol.html">PipelineIteratorProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/PipelineIterator.html">PipelineIterator</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Parallel.html">Parallel</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/ThreadPool.html">ThreadPool</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Array.html">Array</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Pipeline%20Sequence%20Types.html">Pipeline Sequence Types</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/InterleavePipelineSequence.html">InterleavePipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/PrefetchPipelineSequence.html">PrefetchPipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RandomCollectionPipelineSequence.html">RandomCollectionPipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RandomIndicesPipelineSequence.html">RandomIndicesPipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RangePipelineSequence.html">RangePipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ReduceWindowPipelineSequence.html">ReduceWindowPipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SequencePipelineSequence.html">SequencePipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/TransformPipelineSequence.html">TransformPipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Zip2PipelineSequence.html">Zip2PipelineSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Collection.html">Collection</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Pipeline%20Iterator%20Types.html">Pipeline Iterator Types</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DropPipelineIterator.html">DropPipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/FunctionGeneratorPipelineIterator.html">FunctionGeneratorPipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/InterleavePipelineIterator.html">InterleavePipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/PrefetchPipelineIterator.html">PrefetchPipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RandomCollectionPipelineIterator.html">RandomCollectionPipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RandomIndicesIterator.html">RandomIndicesIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/RangePipelineIterator.html">RangePipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ReduceWindowPipelineIterator.html">ReduceWindowPipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ReduceWindowPipelineIterator/Iterator.html">â€“ Iterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SequencePipelineIterator.html">SequencePipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/TakePipelineIterator.html">TakePipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/TransformPipelineIterator.html">TransformPipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Zip2PipelineIterator.html">Zip2PipelineIterator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/Sequence.html">Sequence</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Parallel%20Internals.html">Parallel Internals</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/NaiveThreadPool.html">NaiveThreadPool</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>PipelineSequence</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">PipelineSequence</span></code></pre>

                </div>
              </div>
            <p>A PipelineSequence represents a pipeline-parallelizable sequence of items.</p>

<p>Modern computers have multiple cores that make it efficient to process data in parallel.
While the standard swift <code>IteratorProtocol</code> is extremely versitile for general data-structures,
when operating on large in-memory datasets, it is often very valueable to operate on multiple cores
concurrently. Additionally, when operating on datasets that do not fit in memory, it is very important to
overlap the I/O work with the computation in order to keep all hardware components utilized.</p>

<p><code>PipelineSequence</code> and <code><a href="../Protocols/PipelineIteratorProtocol.html">PipelineIteratorProtocol</a></code> are a common interface to a family
of parallel compute abstractions that are a twist on the standard <code>Sequence</code> and <code>IteratorProtocol</code>s.
The primary mental model is that of a pipeline, where the output of one iterator feeds into the input of the next.
Almost all operations preserve a deterministic ordering of the elements and can be iterated over multiple times,
but this is not required.</p>

<p>Although these transformations are broadly applicable to a variety of applications, they work extremely
well when building high performance input pipelines for training neural networks. We thus use neural networks as
a motivating example for how to use this part of the <code>PenguinParallel</code> library. When training a
neural network using a supervised learning algorithm, training data is:
 (1) <em>read from storage</em> (such as a local SSD, or a remote object storage, or even in remote
   RAM) into local memory.
 (2) <em>transformed</em> such as decompressed or parsed, and often augmented (such as image
   normalizaiton, or random masking of tokens in a sentence). Other transformations can occur
   such as batching, or shuffling the order of elements.
 (3) <em>output</em> for use in training the neural network.</p>

<p>To build such a pipeline using <code>PenguinParallel</code>, we start by generating a list of filenames for
our training data. If we have them in a sequence, we can call <code>.makePipelineIterator()</code>. If
there are too many to keep in memory at once, we could use <code>PipelineIterator.generate</code>
to generate them incrementally. If we can programmatically construct their names (e.g. if their names
are <code>training_data_1</code>, <code>training_data_2</code>, etc), then we could build their names by calling
<code>PipelineIterator.range(1...15).map { &quot;training_data_\($0)&quot; }</code>. (Recall,
the <code>.map</code> function is a higher-order function that takes a closure. This closure takes as input a
single argument of type <code>Element</code> and returns a single new element that is passed along to
subsequent transformations. Here we use Swift&rsquo;s short-hand for closures, where <code>$0</code> refers to
the 0th argument, and because the closure is only a single expressoin we can omit the <code>return</code>
keyword.)</p>

<p>We now need to read the data from storage. If there is only a single training example stored in any one
file, we could read it using <code>itr.map { ReadFromFile($0) }</code>. Note: this will read up to <code>n</code> files
in parallel. Because large datasets are often stored more efficiently with mulitple elements per file,
we can use <code>itr.interleave</code> to read from mulitple files in parallel and combine their aggregate
output.</p>

<p>Now that we have a paralle iterator containing our training data, we can transform it. Here, you can
use any arbitrary Swift (or C/C++) function you would like by calling:
<code>itr.map { transform($0) }</code>. If you would like to batch up mulitple elements into a single
element, you can call <code>.reduceWindow</code>, passing in the batch size, and a function to take an
iterator over the window size and returns the batched element.</p>

<p>Finally, in order to ensure all of this work happens in parallel with the main body of your training loop,
call <code>.prefetch()</code> on the resulting iterator, which will use a background thread to do as much work
as possible before your main loop calls <code>.next()</code>. Et voilÃ , we have now built a high performance
input pipeline for training a neural network.</p>

<p>There are a few differences between <code><a href="../Protocols/PipelineIteratorProtocol.html">PipelineIteratorProtocol</a></code> and the normal Swift
<code>IteratorProtocol</code>. The primary difference is that <code>next()</code> can <code>throw</code>. This is
important because many transformations along a pipeline can fail, such as reading a file or
allocating a batch output. Additionally, (by convention) <code>next()</code> should always return quickly.
If a lot of computation could happen, you can pipeline the work on a background thread by
calling <code>.prefetch()</code>.</p>

<p>A note on copying: <code><a href="../Protocols/PipelineIteratorProtocol.html">PipelineIteratorProtocol</a></code> objects should never be copied, but
instead only mutated in place. If you need to pass an iterator to a function, be sure to pass
it <code>inout</code>. (Calling <code>next()</code> on a copy of an iterator invalidates other copies of the
iterator, and can result in undefined behavior.)</p>

<p>TODO: Convert to be a move-only type when they become available in Swift.</p>

<p>The design of <code>PipelineSequence</code> is heavily inspired by TensorFlow&rsquo;s
<code>tf.data</code> abstractions and their internals, generalized to support arbitrary types and
functions.</p>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequenceP7ElementQa"></a>
                    <a name="//apple_ref/swift/Alias/Element" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The type of the items to be produced when iterating over this <code>PipelineSequence</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">associatedtype</span> <span class="kt">Element</span> <span class="k">where</span> <span class="k">Self</span><span class="o">.</span><span class="kt">Element</span> <span class="o">==</span> <span class="k">Self</span><span class="o">.</span><span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP8IteratorQa">Iterator</a></span><span class="o">.</span><span class="kt">Element</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/PipelineIterator.swift#L75">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequenceP8IteratorQa"></a>
                    <a name="//apple_ref/swift/Alias/Iterator" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequenceP8IteratorQa">Iterator</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The type of the iterator used to iterate over the <code>PipelineSequence</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">associatedtype</span> <span class="kt">Iterator</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/PipelineIteratorProtocol.html">PipelineIteratorProtocol</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/PipelineIterator.swift#L77">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequenceP12makeIterator0F0QzyF"></a>
                    <a name="//apple_ref/swift/Method/makeIterator()" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequenceP12makeIterator0F0QzyF">makeIterator()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Builds an iterator to produce elements corresponding to this sequence.</p>

<p>Note: the returned iterator must not be copied and can only be consumed once.
Some</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">makeIterator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP8IteratorQa">Iterator</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/PipelineIterator.swift#L83">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequencePAAE10interleave10cycleCount06workerG0017perWorkerPrefetchG01fAA010InterleavecD0Vyxqd__GSi_SiSgALqd__7ElementQzKctAaBRd__lF"></a>
                    <a name="//apple_ref/swift/Method/interleave(cycleCount:workerCount:perWorkerPrefetchCount:f:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequencePAAE10interleave10cycleCount06workerG0017perWorkerPrefetchG01fAA010InterleavecD0Vyxqd__GSi_SiSgALqd__7ElementQzKctAaBRd__lF">interleave(cycleCount:workerCount:perWorkerPrefetchCount:f:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Interleaves the output of multiple underlying <code>PipelineSequence</code>s.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="n">interleave</span><span class="o">&lt;</span><span class="kt">P</span><span class="p">:</span> <span class="kt">PipelineSequence</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="nv">cycleCount</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span>
    <span class="nv">workerCount</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="nv">perWorkerPrefetchCount</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="nv">f</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">P</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/InterleavePipelineSequence.html">InterleavePipelineSequence</a></span><span class="o">&lt;</span><span class="k">Self</span><span class="p">,</span> <span class="kt">P</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>cycleCount</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The maximum number of iterators to pull from
concurrently.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>workerCount</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The number of worker threads to use. This must
be larger than <code>cycleCount</code>, and defaults to <code>2 * cycleCount</code>.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>perWorkerPrefetchCount</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The number of elements for each
worker to prefetch. Set to lower numbers to reduce memory consumption,
and set to higher numbers to smooth out variability in latency.
(Current default: 3)</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>f</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>A function that converts an <code><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></code> into a pipeline
iterator that will then be interleaved with other iterators to produce
the new output sequence.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/InterleavePipelineIterator.swift#L260-L273">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequencePAAE8prefetchyAA08PrefetchcD0VyxGSiSgF"></a>
                    <a name="//apple_ref/swift/Method/prefetch(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequencePAAE8prefetchyAA08PrefetchcD0VyxGSiSgF">prefetch(_:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Prefetch inserts pipeline parallelism into a pipeline iterator.</p>

<p>In the following example, <code>myExpensiveFn</code> and <code>myOtherExpensiveFn</code> will
execute on two separate threads in parallel:</p>
<pre class="highlight swift"><code> <span class="k">var</span> <span class="nv">itr</span> <span class="o">=</span> <span class="kt">PipelineIterator</span><span class="o">.</span><span class="n">reduceWindow</span> <span class="p">{</span> <span class="nf">myExpensiveFn</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="nf">prefetch</span><span class="p">()</span>
 <span class="k">while</span> <span class="k">let</span> <span class="nv">elem</span> <span class="o">=</span> <span class="k">try</span> <span class="n">itr</span><span class="o">.</span><span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
     <span class="nf">print</span><span class="p">(</span><span class="nf">myOtherExpensiveFn</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span>
 <span class="p">}</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">prefetch</span><span class="p">(</span><span class="n">_</span> <span class="nv">count</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/PrefetchPipelineSequence.html">PrefetchPipelineSequence</a></span><span class="o">&lt;</span><span class="k">Self</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>count</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The buffer size to overlap between the upstream and
the downstream computation. Pick a smaller buffer size to consume less
memory. Pick a larger buffer size if there is more variability in the
rates of consumption between upstream and downstream work to smooth
out bubbles that can decrease throughput.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/PrefetchPipelineIterator.swift#L128-L130">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequencePAAE10enumeratedAA04Zip2cD0VyAA05RangecD0VxGyF"></a>
                    <a name="//apple_ref/swift/Method/enumerated()" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequencePAAE10enumeratedAA04Zip2cD0VyAA05RangecD0VxGyF">enumerated()</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Adds a sequentially increasing counter to this pipeline sequence.</p>

<p>Enumerated modifies a pipeline sequence to add a sequentially increasing
counter to each element. If <code>self</code> used to return a type <code><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></code>, the
new pipeline iterator produces elements that are tuples of type
<code>(Int, Element)</code>. For example, if the iterator used to produce <code>String</code>s
it will now produce <code>(Int, String)</code>s.</p>

<p>TODO: update the example below.</p>

<p>Example:</p>
<pre class="highlight swift"><code> <span class="k">var</span> <span class="nv">itr</span> <span class="o">=</span> <span class="p">[</span><span class="s">"aardvark"</span><span class="p">,</span> <span class="s">"beluga"</span><span class="p">,</span> <span class="s">"chimp"</span><span class="p">]</span><span class="o">.</span><span class="nf">makePipelineIterator</span><span class="p">()</span><span class="o">.</span><span class="nf">enumerated</span><span class="p">()</span>
 <span class="k">while</span> <span class="k">let</span> <span class="nv">elem</span> <span class="o">=</span> <span class="k">try</span> <span class="n">itr</span><span class="o">.</span><span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
     <span class="nf">print</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
 <span class="p">}</span>
 <span class="c1">// Prints "(0, aardvark)"</span>
 <span class="c1">// Prints "(1, beluga)"</span>
 <span class="c1">// Prints "(2, chimp)"</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">enumerated</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Zip2PipelineSequence.html">Zip2PipelineSequence</a></span><span class="o">&lt;</span><span class="kt"><a href="../Structs/RangePipelineSequence.html">RangePipelineSequence</a></span><span class="p">,</span> <span class="k">Self</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/RangePipelineIterator.swift#L75-L77">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequencePAAE3map4name1fAA09TransformcD0Vyxqd__GSSSg_qd__7ElementQzKctlF"></a>
                    <a name="//apple_ref/swift/Method/map(name:f:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequencePAAE3map4name1fAA09TransformcD0Vyxqd__GSSSg_qd__7ElementQzKctlF">map(name:f:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Transforms the iterator from returning elements of type <code><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></code> into returning elements of type <code>T</code>.</p>

<p>The map function <code>f</code> is run on potentially many threads in a data-parallel manner.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="n">map</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">f</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/TransformPipelineSequence.html">TransformPipelineSequence</a></span><span class="o">&lt;</span><span class="k">Self</span><span class="p">,</span> <span class="kt">T</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/TransformPipelineIterator.swift#L344-L346">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequencePAAE6filter4name1fAA09TransformcD0Vyx7ElementQzGSSSg_SbAJKctF"></a>
                    <a name="//apple_ref/swift/Method/filter(name:f:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequencePAAE6filter4name1fAA09TransformcD0Vyx7ElementQzGSSSg_SbAJKctF">filter(name:f:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Filter removes elements where <code>f(elem)</code> returns <code>false</code>, but passes through elements that
return <code>true</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">filter</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">f</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/TransformPipelineSequence.html">TransformPipelineSequence</a></span><span class="o">&lt;</span><span class="k">Self</span><span class="p">,</span> <span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/TransformPipelineIterator.swift#L350-L354">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:15PenguinParallel16PipelineSequencePAAE10compactMap4name1fAA09TransformcD0Vyxqd__GSSSg_qd__Sg7ElementQzKctlF"></a>
                    <a name="//apple_ref/swift/Method/compactMap(name:f:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:15PenguinParallel16PipelineSequencePAAE10compactMap4name1fAA09TransformcD0Vyxqd__GSSSg_qd__Sg7ElementQzKctlF">compactMap(name:f:)</a>
                    </code>
                      <span class="declaration-note">
                        Extension method
                      </span>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Compact map removes <code>nil</code>s, but passes through transformed elements of type <code>T</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="n">compactMap</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">f</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Protocols/PipelineSequence.html#/s:15PenguinParallel16PipelineSequenceP7ElementQa">Element</a></span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">T</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/TransformPipelineSequence.html">TransformPipelineSequence</a></span><span class="o">&lt;</span><span class="k">Self</span><span class="p">,</span> <span class="kt">T</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/saeta/penguin/tree/master/Sources/PenguinParallel/Pipeline/TransformPipelineIterator.swift#L357-L359">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://github.com/saeta" target="_blank" rel="external">Brennan Saeta <a href="mailto:saeta@google.com">saeta@google.com</a></a>. All rights reserved. (Last updated: 2020-01-09)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.13.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
